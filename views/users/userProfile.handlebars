<section class="h-100 gradient-custom-2">
  <div class="container py-5 h-100">
    <div class="row d-flex justify-content-center align-items-center h-100">
      <div class="col col-lg-9 col-xl-7">
        <div class="card">
          <div class="rounded-top text-white d-flex flex-row" style="background-color: #000; height:200px;">
            <div class="ms-4 mt-5 d-flex flex-column" style="width: 150px;">
              <img src="{{displayPicture}}"
                alt="Generic placeholder image" class="img-fluid img-thumbnail mt-4 mb-2"
                style="width: 150px; z-index: 1">
              
              {{#if sameUser}}
              <button type="button" class="btn btn-outline-dark" data-mdb-ripple-color="dark"
                style="z-index: 1;">
                Edit profile
              </button>
              {{/if}}
            </div>
            <div class="ms-3" style="margin-top: 130px; color:#fff">
              <h5> <span style="color:white">{{firstName}} {{lastName}}</span> </h5>
              
            </div>
          </div>
          <div class="p-4 text-black" style="background-color: #f8f9fa;">
            <div class="d-flex justify-content-end text-center py-1">
              {{#if isMatched}}
              
              <div class="px-3">
                <a type="button" href = "/users/{{id}}/updateStatus?status=report&page=getRecommendations" class = "btn btn-danger">Report</a>
              </div>
              <div class="px-3">
                <a type="button" href = "/users/{{id}}/updateStatus?status=unmatch&page=getUser"class = "btn btn-success">Unmatch</a>
              </div>
              <button type="button" class="btn btn-success" data-bs-toggle="modal" data-bs-target="#messageModal">
                Message
              </button>
              <button type="button" class="btn btn-success" data-bs-toggle="modal" data-bs-target="#blockModal">
                Report
              </button>
              {{/if}}
              
              <div class="px-3">
                <p>{{message}}</p>
              </div>
                            
              {{#if isAccepted}}
              <div class="px-3">
                <a type="button" href = "/users/{{id}}/updateStatus?status=accept&page=getUser"class = "btn btn-success">Accept</a>
              </div>
              {{/if}}
              {{#if isRejected}}
                <div>
                <a href="/users/{{id}}/updateStatus?status=reject&page=getUser" type="button" class = "btn btn-danger">Reject</a>
              </div>
              {{/if}}

            </div>
          </div>
          <div class="card-body p-4 text-black">
            <div class="mb-5">
              <p class="lead fw-normal mb-1">About</p>
              <div class="p-4" style="background-color: #f8f9fa;">
                {{description}}
              </div>
            </div>
            <div class="mb-5">
              <p class="lead fw-normal mb-1">Details</p>
              <div class="p-4" style="background-color: #f8f9fa;">
                
                <p class="font-italic mb-1">Age:{{age}}</p>
                <p class="font-italic mb-1">Gender:{{gender}}</p>
                <p >Interested in: {{interests}}</p>
                
                
              </div>
            </div>
                        <div class="d-flex justify-content-between align-items-center mb-4">
              <p class="lead fw-normal mb-0">Recent photos</p>
              <p class="mb-0"><a href="#!" class="text-muted">+</a></p>
            </div>
            <div class="row g-2">
              <div class="col mb-2">
                {{!-- multiple images --}}
                  <div id="carouselExampleIndicators" class="carousel slide" data-bs-ride="carousel">
                    <div class="carousel-indicators">
                      <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
                      {{#each gallery}}
                        <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="{{this.id}}" aria-label="Slide {{this.id}}"></button>
                      {{/each}}
                    </div>
                    <div class="carousel-inner">
                      <div class="carousel-item active">
                        <img src={{displayPicture}} alt="One of users image" class="d-block w-100 rounded-2">
                      </div>
                      {{#each gallery}}
                      <div class="carousel-item">
                        <img src="{{this.userImage}}" class="d-block w-100 rounded-2" alt="One of users image">
                      </div>
                      {{/each}}
                    </div>
                    <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="prev">
                      <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                      <span class="visually-hidden">Previous</span>
                    </button>
                    <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="next">
                      <span class="carousel-control-next-icon" aria-hidden="true"></span>
                      <span class="visually-hidden">Next</span>
                    </button>
                  </div>

                {{!-- <img src={{displayPicture}} alt="image 1" class="w-100 rounded-3"> --}}
              </div>
            </div>
            
            
            
          </div>
        </div>
      </div>
    </div>
  </div>
</section>


<div class="modal fade" id="messageModal" tabindex="-1" aria-labelledby="messageModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="messageModalLabel">Send message to {{data.firstName}} {{data.lastName}}</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
        <form id="messageModal" onsubmit="messageUser(event)"><!--url post-->
          <div class="modal-body">
            <div class="mb-3">
              <!--input-->
              <input id="messageUserId" type="hidden" value="{{id}}">
              <label for="messageUser" class="form-label">Message</label>
              <input type="text" class="form-control" id="messageUser" placeholder="Enter message here!" style="height: 3cm">
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
            <button type="submit" class="btn btn-primary" data-bs-dismiss="modal">Send</button>
          </div>
        </form>
    </div>
  </div>
</div>

<div class="modal fade" id="blockModal" tabindex="-1" aria-labelledby="blockModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="blockModalLabel">Report {{response.data.firstName}} {{response.data.lastName}}</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
        <form id="blockModal" method="post" onsubmit="reportUser(event)"><!--url post-->
          <div class="modal-body">
            <div class="mb-3">
              {{!-- input --}}
              <input id="reportUserId" type="hidden" value="{{id}}">
              <label for="reportMessage" class="form-label">Reason</label>
              <input type="text" class="form-control" id="reportMessage" placeholder="Enter reason here!" style="height: 3cm">
            </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
            <button type="submit" class="btn btn-primary" data-bs-dismiss="modal">Report</button>
          </div>
        </form>
    </div>
  </div>
</div>